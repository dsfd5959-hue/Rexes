<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rexes MiniApp</title>
    <!-- Telegram SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container fade-in">

        <!-- Header -->
        <div class="header-profile">
            <div class="profile-info">
                <div id="avatar" class="avatar-placeholder">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div class="user-text">
                    <h1 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
                    <p id="user-username">@loading</p>
                </div>
            </div>
            <div class="settings-btn" onclick="openSettings()">
                <i class="fa-solid fa-gear" style="color: #fff;"></i>
            </div>
        </div>

        <h2 class="rates-title">–ö—É—Ä—Å—ã</h2>
        <p class="rates-subtitle">–í–∞–ª—é—Ç–∞ –∏ –∫—É—Ä—Å –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞</p>

        <!-- Selectors -->
        <div class="selectors-area">
            <!-- Custom City Trigger -->
            <button id="city-selector" class="big-selector" onclick="toggleLocationModal(true)">
                <span id="current-city-label" style="pointer-events: none;"><i class="fa-solid fa-location-dot"
                        style="margin-right: 6px;"></i> –ú–æ—Å–∫–≤–∞</span>
            </button>

            <div class="big-selector">
                <span>üá∑üá∫ RUB</span>
            </div>
        </div>

        <!-- Rates Table -->
        <div class="rates-table">
            <div class="rates-header">
                <span>–í–∞–ª—é—Ç–∞</span>
                <span>–ö—É–ø–∏—Ç—å</span>
                <span>–ü—Ä–æ–¥–∞—Ç—å</span>
            </div>

            <!-- USDT TRC20 -->
            <div class="rate-row">
                <div class="rate-col-currency">
                    <div class="rate-icon bg-tether"><img src="trc20.svg" alt="TRC20"></div>
                    <div class="rate-info">
                        <span class="rate-name">Tether</span>
                        <span class="rate-sub">USDT TRC20</span>
                    </div>
                </div>
                <div class="rate-price" id="usdt-trc-buy">Loading...</div>
                <div class="rate-price" id="usdt-trc-sell">Loading...</div>
            </div>

            <!-- BTC -->
            <div class="rate-row">
                <div class="rate-col-currency">
                    <div class="rate-icon bg-btc">‚Çø</div>
                    <div class="rate-info">
                        <span class="rate-name">Bitcoin</span>
                        <span class="rate-sub">BTC</span>
                    </div>
                </div>
                <div class="rate-price" id="btc-buy">Loading...</div>
                <div class="rate-price" id="btc-sell">Loading...</div>
            </div>

            <!-- ETH -->
            <div class="rate-row">
                <div class="rate-col-currency">
                    <div class="rate-icon bg-eth"><img src="ethereum.svg" alt="ETH"></div>
                    <div class="rate-info">
                        <span class="rate-name">Ethereum</span>
                        <span class="rate-sub">ETH</span>
                    </div>
                </div>
                <div class="rate-price" id="eth-buy">Loading...</div>
                <div class="rate-price" id="eth-sell">Loading...</div>
            </div>

            <!-- USDT ERC20 -->
            <div class="rate-row" style="border-bottom: none;">
                <div class="rate-col-currency">
                    <div class="rate-icon"><img src="erc20.svg" alt="USDT ERC20"
                            style="width: 100%; height: 100%; filter: none;"></div>
                    <div class="rate-info">
                        <span class="rate-name">Tether</span>
                        <span class="rate-sub">USDT ERC20</span>
                    </div>
                </div>
                <div class="rate-price" id="usdt-erc-buy">Loading...</div>
                <div class="rate-price" id="usdt-erc-sell">Loading...</div>
            </div>

        </div>

        <!-- Actions -->
        <button class="btn-primary" onclick="toggleModal(true)">
            <i class="fa-solid fa-arrow-right-arrow-left"></i> –û–±–º–µ–Ω—è—Ç—å
        </button>

        <button class="btn-secondary" onclick="openSupport()">
            <i class="fa-regular fa-comment-dots"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞
        </button>

    </div>

    <!-- Exchange Modal -->
    <div class="modal-overlay" id="exchange-modal">
        <div class="modal-sheet">
            <div class="modal-header">
                <span class="modal-title">–û–±–º–µ–Ω</span>
                <button class="close-btn" onclick="toggleModal(false)"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <div class="modal-input-group">
                <label class="modal-label">–û—Ç–¥–∞–µ—Ç–µ (USDT)</label>
                <input type="number" id="amount-in" class="modal-input" placeholder="0" oninput="calculateExchange()">
            </div>

            <div class="modal-input-group">
                <label class="modal-label">–ü–æ–ª—É—á–∞–µ—Ç–µ (RUB)</label>
                <input type="number" id="amount-out" class="modal-input" placeholder="0" readonly>
            </div>

            <div class="modal-input-group">
                <label class="modal-label">–§–ò–û –ü–æ–ª—É—á–∞—Ç–µ–ª—è</label>
                <input type="text" id="fio" class="modal-input" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
            </div>

            <div class="modal-input-group">
                <label class="modal-label">–í–∞—à –∫–æ–Ω—Ç–∞–∫—Ç</label>
                <input type="text" id="contact" class="modal-input" placeholder="@username">
            </div>

            <button class="btn-primary" onclick="submitOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
    </div>

    <!-- Location Modal -->
    <div class="modal-overlay" id="location-modal">
        <div class="modal-sheet">
            <div class="modal-header">
                <span class="modal-title">–õ–æ–∫–∞—Ü–∏—è</span>
                <button class="close-btn" onclick="toggleLocationModal(false)"><i
                        class="fa-solid fa-xmark"></i></button>
            </div>
            <p class="modal-desc">
                –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ñ–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ—Ñ–∏—Å–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–º–µ–Ω—è—Ç—å –≤–∞—à–∏
                –∞–∫—Ç–∏–≤—ã
            </p>

            <div class="location-list" id="location-list">
                <!-- Items will be injected by JS -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>